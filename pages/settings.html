<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Settings</title>
    <link rel="stylesheet" href="http://yegor256.github.io/tacit/tacit.min.css"/>
  </head>
  <body>
    <div id="app">
      <article>
        <form v-on:submit.prevent="apply">
          <fieldset>
            <label for="watchDir">Directory to watch:</label>
            <button type="button" @click="openDir">Select Directory</button>
            <input name="watchDir" type="text" v-model="watchDir" style="display: inline-block" size="50">
          </fieldset>

          <label>Notifications enabled <input type="checkbox" v-model="notifications"></label>

          <button type="submit">Apply</button>
        </form>
      </article>
    </div>
    <!-- TODO use bootstrap -->
    <script>
      // Our connection back to the mainland, har har.
      const remote = require('electron').remote
      console.log(remote)
      const ransomAware = remote.require('./ransomAware.js')
      console.log(ransomAware)

      let Vue = require('vue')
      console.log(Vue)
      let app = new Vue({
        el: '#app',
        data: {
          watchDir: 'C:\\',
          notifications: true
        },
        methods: {
          openDir () {
            self = this
            remote.dialog.showOpenDialog({
              defaultPath: self.watchDir,
              properties: ['openDirectory']
            }, (dir) => {
              if (dir) {
                self.watchDir = dir
              }
            })
          },
          apply () {
            ransomAware.settings(this.$data)
          },
          start () {
            ransomAware.start()
          },
          stop () {
            ransomAware.stop()
          }
        },
        ready () {
          Object.assign(this.$data, ransomAware.settings())
        }
      })
    </script>
  </body>
</html>
